MARIADB DEPLOY + REPLICATION
=========

Данная роль предназначена для установки, настройки MariaDB, а также для настройки master-master репликации между двумя серверами MariaDB

Требования
------------

Для корректной работы роли требуется установить на конечный сервер клиентскую библиотеку PyMySQL (установка прописана в роли).
Репликация настраивается только в случае, если оба сервера MariaDB взаимно доступны по адресам указанным в переменной `{{ mariadb_repl.<server_one или _two>.srv_addr }}`.

Конфигурация
--------------

Переменные конфигураций находятся в директории `./defaults`.
Файл конфигурации состоит из двух частей:
1. mariadb - Содержит переменные для установки и настройки MariaDB
2. mariadb_repl - Содержит переменные для установки и настройки репликации между серверами MariaDB

Структура
------------

Роль состоит из нескольких tasks:
- mariadb_deploy.yml - первоначальная установка и конфигурация MariaDB
- mariadb_setup_db.yml - создание БД и пользователей, импорт дампов
- master_one - настройка первого мастер сервера
- master_two - настройка второго мастер сервера
- main.yml - выполняет вышеперечисленные tasks. Содержит в тебе tasks для проверки доступа к MariaDB на серверах.

Playbook
----------------

Путь: ./ansible/ansible_playbooks/default_playbooks/mariadb_deploy.yml

Author Information
------------------

Максим Демченко
